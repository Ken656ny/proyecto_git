<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/src/static/css/sytle.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.17.2/dist/sweetalert2.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <title>Edupork</title>
</head>
<body class="body__porcinos">
    <section class="section-nav-bar" >
        <div class="container-user">
            <div class="container__btn__perfil">
                <img src="../static/iconos/icon user.svg" alt="" width="25" class="svg__user__2">
                <button type="button" class="btn__perfil">Juan Tovar</button>
            </div>
            <div class="menu">
                <img src="../static/iconos/menu_icon.svg" alt="" class="menu-icons">
                <img src="../static/iconos/close_icon.svg" alt="" class="menu-icons">
            </div>
        </div>
        <div class="barra-lateral">
            <div>
                <div class="logo-edupork">
                    <img id="cerdo" class="nombre" src="../static/iconos/cerdo.png" width="20px" alt="">
                    <span>Edupork</span>
                </div>
            </div>
            <nav class="navegacion">
                <ul class="ul-navegacion">
                    <li>
                        <a href="/src/templates/home.html" onclick="redirectWithDelay(event, 'home.html')" > <!--dar estilo -->
                            <img src="../static/iconos/home icon.svg" width="20px" alt="" class="icons-bar">
                            <span>Home</span>
                        </a>
                    </li>
                    <li>
                        <a href="/src/templates/notificaciones.html">
                            <img src="../static/iconos/notificacions.svg" width="20px" alt="" class="icons-bar">
                            <span>Notificaciones </span>
                        </a>
                    </li>
                    <li>
                        <a href="/src/templates/porcinos.html" onclick="manejarClickRol(event)">
                            <img src="../static/iconos/icon pig.svg" width="20px" alt="" class="icons-bar">
                            <span>Porcinos</span>
                        </a>
                    </li>
                    <li>
                        <a href="/src/templates/alimentos.html" onclick="redirectWithDelay(event, 'alimentos.html')">
                            <img src="../static/iconos/icon wheate.svg" title="alimentos" width="20px" alt="" class="icons-bar">
                            <span>Alimentos</span>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="../static/iconos/icon plate.svg" width="20px" alt="" class="icons-bar">
                            <span>Dietas</span>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="../static/iconos/icon page.svg" alt="" class="icons-bar">
                            <span>Informes</span>
                        </a>
                    </li>
                    <li>
                        <a href="/src/templates/perfil.html" onclick="redirectWithDelay(event, 'perfil.html')">
                            <img src="../static/iconos/icon user.svg" width="20px" alt="" class="icons-bar">
                            <span>Perfil</span>
                        </a>
                    </li>
                    <li>
                        <a href="/src/templates/configuracion.html" onclick="redirectWithDelay(event, 'configuracion.html')">
                            <img src="../static/iconos/icon setting.svg" width="20px" alt="" class="icons-bar">
                            <span>Configuración</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </section>
    <section class="section__porcinos" >

        <section class="container__logo__user">
            <div class="container__back__logo" >
                <img src="/src/static/iconos/back icon.svg" alt="icon back" class="icon__back">
                <a href="/src/templates/home.html">
                    <img src="/src/static/iconos/Logo.svg" alt="Logo Edupork" class="logo">
                </a>
            </div>      
            <div class="container__user__btn">
                <img src="/src/static/iconos/icon user.svg" alt="" class="svg__user">
                <button type="button" class="btn__perfil">David</button>
            </div>
        </section>

          <header class="content_reportes_pesos">
         <h2 class="title_reportes_pesos">Generar informes de alimentos más y menos utilizados</h2>
        </header>
            <section class="container container__reportes_pesos">
        <!-- Ícono documento -->
        <img src="/src/static/iconos/Vector (6).svg" alt="icono informe" class="icon__informe">

<!-- Buscador por NOMBRE con autocompletado -->
<div class="dropdown filtro-nombre">
    <input type="text" class="input__id" id="buscar_alimento" placeholder="Nombre del alimento...">
    <div class="dropdown__content" id="lista_autocompletado"></div>
</div>


    <!-- Filtro con icono -->
    <div class="dropdown filtro-peso">
        <img src="/src/static/iconos/icon filter.svg" alt="icon filtro" class="icon__filtro_dropdown">
        <input type="text" class="input__id" id="input_filtro_peso" placeholder="Alimentos" readonly>
        <div class="dropdown__content">
            <a onclick="cargarReporteAlimentos('todos')">Todos</a>
            <a onclick="cargarReporteAlimentos('mayor')">Mayor consumido</a>
            <a onclick="cargarReporteAlimentos('menor')">Menor consumido</a>


        </div>
    </div>

    </div>
<img src="/src/static/iconos/exportar_pdf.svg" 
     alt="icono export" 
     class="icon__export" 
     onclick="exportarReporteAlimentos()">

    </section>

<!-- TABLA --><section class="container__Reportes_alimento_">
       <div class="contenido__tabla"> 
        <table class="table__alimento">
            <thead id="cabecera-alimentos">
                <tr> 
                    <th></th>
                    <th>Nombre de alimento</th>
                    <th>Mayor consumido se usó en</th>
                    <th>Menor consumido se usó</th>
                    <th>Promedio de cantidad usada (KG)</th>
                     <th></th>
                </tr>
            </thead>

            <tbody class="registros" id="contenido"></tbody>
        </table>
    </div> <!-- FIN DEL DIV AGREGADO -->

</section><div id="reportePDF" style="display:none; font-family: Inter;">
    <div style="text-align:center; margin-bottom:20px;">
        <img src="/src/static/iconos/Logo.svg" width="300">
        <h2>Informe de Alimentos</h2>
    </div>

    <table style="width:100%; border-collapse: collapse; font-size: 16px;">
        <thead>
            <tr style="background:#e8e8e8;">
                <th style="padding:20px; border:2px solid #ccc;"></th>
                <th style="padding:20px; border:2px solid #ccc;">Nombre</th>
                <th style="padding:20px; border:2px solid #ccc;">Mayor consumido</th>
                <th style="padding:20px; border:2px solid #ccc;">Menor consumido</th>
                <th style="padding:20px; border:2px solid #ccc;">Promedio KG</th>
            </tr>
        </thead>
        <tbody id="contenidoReporte"></tbody>
    </table>
</div>


</div><div id="modalGrafica" class="modal_grafica" style="
    position: fixed; 
    top:0; left:0; right:0; bottom:0;
    background: rgba(0,0,0,0.5);
    display:none;
    justify-content:center;
    align-items:center;
    z-index:9999;
">
    <div style="
        width: 450px;
        background:white;
        padding:20px;
        border-radius:20px;
        text-align:center;
        position:relative;
    ">
        <h3 id="tituloGrafica"></h3>

        <canvas id="chartAlimento" width="300" height="300"></canvas>

        <button onclick="cerrarGrafica()" style="
            margin-top:15px; 
            padding:10px 20px;
            background:#333;
            color:white;
            border:none;
            border-radius:10px;
        ">
            Cerrar
        </button>
    </div>
</div>


    <script src="/src/static/js/reportes.js"></script>
    <script>
        consulta_alimentos();
    </script>
</body>
</html>